{"version":3,"file":"file-utils.js","names":["_promises","require","_nodeOs","_interopRequireDefault","_nodePath","e","__esModule","default","Files","exports","DatabaseName","createTempFolder","prefix","mkdtemp","path","join","os","tmpdir","createTempStorageFolder","folder","tempFolder","storageFolder","mkdir"],"sources":["../src/file-utils.ts"],"sourcesContent":["import { mkdir, mkdtemp } from 'node:fs/promises';\nimport os from 'node:os';\nimport path from 'node:path';\n\nexport const Files = {\n  DatabaseName: '.verdaccio-db.json',\n};\n\n/**\n * Create a temporary folder.\n * @param prefix The prefix of the folder name.\n * @returns string\n */\nexport async function createTempFolder(prefix: string): Promise<string> {\n  return await mkdtemp(path.join(os.tmpdir(), 'verdaccio-' + prefix + '-'));\n}\n\n/**\n * Create temporary folder for an asset.\n * @param prefix\n * @param folder name\n * @returns\n */\nexport async function createTempStorageFolder(prefix: string, folder = 'storage'): Promise<string> {\n  const tempFolder = await createTempFolder(prefix);\n  const storageFolder = path.join(tempFolder, folder);\n  await mkdir(storageFolder);\n  return storageFolder;\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,SAAA,GAAAD,sBAAA,CAAAF,OAAA;AAA6B,SAAAE,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEtB,MAAMG,KAAK,GAAAC,OAAA,CAAAD,KAAA,GAAG;EACnBE,YAAY,EAAE;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACO,eAAeC,gBAAgBA,CAACC,MAAc,EAAmB;EACtE,OAAO,MAAM,IAAAC,iBAAO,EAACC,iBAAI,CAACC,IAAI,CAACC,eAAE,CAACC,MAAM,CAAC,CAAC,EAAE,YAAY,GAAGL,MAAM,GAAG,GAAG,CAAC,CAAC;AAC3E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,eAAeM,uBAAuBA,CAACN,MAAc,EAAEO,MAAM,GAAG,SAAS,EAAmB;EACjG,MAAMC,UAAU,GAAG,MAAMT,gBAAgB,CAACC,MAAM,CAAC;EACjD,MAAMS,aAAa,GAAGP,iBAAI,CAACC,IAAI,CAACK,UAAU,EAAED,MAAM,CAAC;EACnD,MAAM,IAAAG,eAAK,EAACD,aAAa,CAAC;EAC1B,OAAOA,aAAa;AACtB","ignoreList":[]}